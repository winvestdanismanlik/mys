<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Formzen - Bitkisel Gıda Ürünleri Kar/Zarar Hesaplama Programı</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 15px;
            margin: 0;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
            overflow: hidden;
            border: 1px solid #e0e6ed;
        }
        
        header {
            background: linear-gradient(135deg, #1e5631 0%, #4caf50 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            position: relative;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-bottom: 5px solid #2e7d32;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logo-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: contain;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            background-color: white;
            padding: 5px;
            flex-shrink: 0;
        }
        
        .company-title {
            font-size: 32px;
            font-weight: 900;
            margin-bottom: 8px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 0.5px;
            line-height: 1.2;
        }
        
        .company-subtitle {
            font-size: 18px;
            opacity: 0.95;
            margin-bottom: 15px;
            color: #e8f5e9;
            font-weight: 500;
        }
        
        h1 {
            margin: 15px 0 0 0;
            font-size: 28px;
            font-weight: 700;
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            display: inline-block;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            line-height: 1.3;
            max-width: 90%;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 25px;
            gap: 25px;
            align-items: flex-start;
        }
        
        .input-section {
            flex: 1;
            min-width: 400px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid #eef2f7;
            max-height: calc(100vh - 300px);
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #4caf50 #f1f1f1;
        }
        
        .input-section::-webkit-scrollbar {
            width: 8px;
        }
        
        .input-section::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .input-section::-webkit-scrollbar-thumb {
            background: #4caf50;
            border-radius: 4px;
        }
        
        .input-section::-webkit-scrollbar-thumb:hover {
            background: #388e3c;
        }
        
        .result-section {
            flex: 1;
            min-width: 400px;
            padding: 25px;
            background: linear-gradient(180deg, #f9fafc 0%, #ffffff 100%);
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid #eef2f7;
            display: flex;
            flex-direction: column;
            min-height: 600px;
        }
        
        .advanced-section {
            width: 100%;
            padding: 20px;
            margin-top: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
        }
        
        .campaign-section {
            width: 100%;
            padding: 20px;
            margin-top: 20px;
            background-color: #f8f9ff;
            border-radius: 12px;
            border: 1px solid #e0e7ff;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1;
            min-width: 220px;
            margin-bottom: 15px;
        }
        
        .compact-form-group {
            flex: 0 0 calc(50% - 10px);
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #2d3748;
            font-size: 15px;
            line-height: 1.4;
        }
        
        .label-info {
            font-size: 12px;
            color: #718096;
            font-weight: normal;
            display: block;
            margin-top: 4px;
            font-style: italic;
            line-height: 1.4;
        }
        
        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            background-color: #fff;
            color: #2d3748;
            min-height: 52px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4caf50;
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.2);
            background-color: #f9fff9;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            min-height: 60px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            transform: scale(1.3);
            accent-color: #4caf50;
            min-height: auto;
        }
        
        .campaign-inputs {
            display: none;
            margin-top: 15px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }
        
        .campaign-example {
            font-size: 13px;
            color: #718096;
            margin-top: 6px;
            font-style: italic;
            line-height: 1.4;
        }
        
        .cost-summary {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 25px;
            border: 2px solid #eef2f7;
            flex: 1;
            overflow-y: auto;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 2px dashed #e2e8f0;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .cost-title {
            font-weight: 600;
            color: #4a5568;
            font-size: 15px;
            flex: 1;
            min-width: 200px;
        }
        
        .cost-value {
            font-weight: 700;
            color: #2d3748;
            font-size: 15px;
            text-align: right;
            min-width: 120px;
        }
        
        .cost-sub-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-left: 15px;
            font-size: 14px;
            flex-wrap: wrap;
        }
        
        .sub-item-title {
            color: #718096;
            flex: 1;
            min-width: 150px;
        }
        
        .total-profit {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
            border: 3px solid #38bdf8;
            border-radius: 16px;
            padding: 25px;
            margin-top: 20px;
            text-align: center;
            transition: all 0.4s;
            box-shadow: 0 8px 25px rgba(56, 189, 248, 0.15);
        }
        
        .profit-header {
            font-size: 20px;
            font-weight: 800;
            color: #0c4a6e;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1.3;
        }
        
        .profit-positive {
            color: #10b981;
            font-size: 40px;
            font-weight: 900;
            margin: 10px 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
            word-break: break-word;
        }
        
        .profit-negative {
            color: #ef4444;
            font-size: 40px;
            font-weight: 900;
            margin: 10px 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            line-height: 1.2;
            word-break: break-word;
        }
        
        .profit-neutral {
            color: #6b7280;
            font-size: 40px;
            font-weight: 900;
            margin: 10px 0;
            line-height: 1.2;
        }
        
        .profit-margin {
            font-size: 18px;
            font-weight: 800;
            margin-top: 10px;
            color: #1e40af;
            background: white;
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-block;
            border: 2px solid #dbeafe;
            line-height: 1.3;
        }
        
        .profit-ratio {
            font-size: 18px;
            font-weight: 700;
            margin-top: 10px;
            color: #7c3aed;
            background: #f5f3ff;
            padding: 10px 20px;
            border-radius: 10px;
            display: inline-block;
            border: 2px solid #ede9fe;
            margin-left: 8px;
            line-height: 1.3;
        }
        
        .campaign-info {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #1b5e20;
            line-height: 1.5;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        button {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.5px;
            min-height: 60px;
            min-width: 150px;
            touch-action: manipulation;
        }
        
        .calculate-btn {
            background: linear-gradient(135deg, #1e5631 0%, #4caf50 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(30, 86, 49, 0.35);
        }
        
        .calculate-btn:hover {
            background: linear-gradient(135deg, #1b5e20 0%, #388e3c 100%);
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(30, 86, 49, 0.5);
        }
        
        .calculate-btn:active {
            transform: translateY(-2px);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            color: #374151;
            border: 2px solid #d1d5db;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .reset-btn:hover {
            background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.12);
        }
        
        .history-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
            flex-shrink: 0;
        }
        
        .history-title {
            font-weight: 800;
            margin-bottom: 15px;
            color: #1f2937;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .clear-history {
            background: none;
            border: 2px solid #ef4444;
            color: #ef4444;
            cursor: pointer;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s;
            font-weight: 700;
            min-height: 40px;
            white-space: nowrap;
        }
        
        .clear-history:hover {
            background-color: #ef4444;
            color: white;
        }
        
        .history-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 5px solid #4caf50;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .history-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }
        
        .history-product {
            font-weight: 800;
            margin-bottom: 6px;
            color: #1f2937;
            font-size: 16px;
            line-height: 1.3;
        }
        
        .history-platform {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 6px;
            line-height: 1.4;
        }
        
        .history-profit {
            font-weight: 800;
            font-size: 18px;
            align-self: flex-end;
        }
        
        .profit-positive-sm {
            color: #10b981;
        }
        
        .profit-negative-sm {
            color: #ef4444;
        }
        
        .section-title {
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid #e5e7eb;
            color: #1e5631;
            font-weight: 900;
            position: relative;
            letter-spacing: 0.5px;
            line-height: 1.3;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #4caf50;
            font-size: 24px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #1e5631, #4caf50);
            border-radius: 3px;
        }
        
        /* Yeni Eklenen: Daha İyi Mobil Uyumluluk */
        .mobile-optimized {
            /* Mobil için özel stiller */
        }
        
        @media (max-width: 1200px) {
            .container {
                border-radius: 14px;
            }
            
            .content {
                padding: 20px;
                gap: 20px;
            }
            
            .input-section, .result-section {
                padding: 20px;
            }
            
            .form-row {
                gap: 15px;
            }
        }
        
        @media (max-width: 1024px) {
            .input-section, .result-section {
                min-width: 350px;
            }
            
            .company-title {
                font-size: 28px;
            }
            
            h1 {
                font-size: 24px;
                padding: 10px 25px;
            }
        }
        
        @media (max-width: 900px) {
            .content {
                flex-direction: column;
                gap: 20px;
            }
            
            .input-section {
                max-height: none;
                overflow-y: visible;
            }
            
            .result-section {
                min-height: auto;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 12px;
            }
            
            header {
                padding: 20px 15px;
                min-height: 200px;
            }
            
            .company-title {
                font-size: 24px;
            }
            
            .company-subtitle {
                font-size: 16px;
            }
            
            .logo-image {
                width: 80px;
                height: 80px;
            }
            
            h1 {
                font-size: 20px;
                padding: 10px 20px;
            }
            
            .content {
                padding: 15px;
                gap: 15px;
            }
            
            .input-section, .result-section {
                padding: 20px 15px;
                min-width: 100%;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-group, .compact-form-group {
                min-width: 100%;
                flex: 1 1 100%;
            }
            
            .advanced-section, .campaign-section, .influencer-section {
                padding: 15px;
            }
            
            .section-title {
                font-size: 20px;
                margin-bottom: 15px;
            }
            
            .cost-summary {
                padding: 15px;
            }
            
            .profit-header {
                font-size: 18px;
            }
            
            .profit-positive, .profit-negative, .profit-neutral {
                font-size: 32px;
            }
            
            .profit-margin, .profit-ratio {
                font-size: 16px;
                padding: 8px 15px;
                margin-top: 8px;
                display: block;
                margin-left: 0;
                width: 100%;
            }
            
            .profit-ratios {
                flex-direction: column;
                gap: 10px;
            }
            
            .buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            button {
                width: 100%;
                min-height: 56px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px;
            }
            
            .stat-value {
                font-size: 22px;
            }
            
            .history-item {
                padding: 12px;
            }
            
            .history-profit {
                font-size: 16px;
            }
            
            .checkbox-group {
                padding: 12px;
            }
            
            input, select {
                padding: 12px 14px;
                min-height: 48px;
            }
        }
        
        @media (max-width: 480px) {
            header {
                min-height: 180px;
            }
            
            .company-title {
                font-size: 20px;
                text-align: center;
            }
            
            .company-subtitle {
                font-size: 14px;
                text-align: center;
            }
            
            .logo-container {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            h1 {
                font-size: 18px;
                padding: 10px 15px;
                max-width: 100%;
            }
            
            .section-title {
                font-size: 18px;
            }
            
            .profit-positive, .profit-negative, .profit-neutral {
                font-size: 28px;
            }
            
            .total-profit {
                padding: 20px 15px;
            }
            
            .profit-margin, .profit-ratio {
                font-size: 14px;
                padding: 8px 12px;
            }
            
            .cost-item, .cost-sub-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .cost-value {
                text-align: left;
                min-width: 100%;
            }
            
            .sub-item-title {
                min-width: 100%;
            }
            
            .history-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .clear-history {
                align-self: flex-start;
            }
            
            .tax-info, .campaign-info {
                padding: 12px;
                font-size: 13px;
            }
            
            .label-info, .campaign-example, .input-hint {
                font-size: 11px;
            }
        }
        
        @media (max-width: 360px) {
            .company-title {
                font-size: 18px;
            }
            
            h1 {
                font-size: 16px;
            }
            
            .section-title {
                font-size: 16px;
            }
            
            .profit-positive, .profit-negative, .profit-neutral {
                font-size: 24px;
            }
            
            button {
                font-size: 15px;
                padding: 15px;
            }
            
            .stat-value {
                font-size: 20px;
            }
        }
        
        @media (hover: none) and (pointer: coarse) {
            /* Dokunmatik cihazlar için */
            button:hover {
                transform: none;
            }
            
            .calculate-btn:hover, .reset-btn:hover {
                transform: none;
                box-shadow: 0 6px 20px rgba(30, 86, 49, 0.35);
            }
            
            input:focus, select:focus {
                box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
            }
        }
        
        @media (orientation: landscape) and (max-height: 600px) {
            /* Yatay modda mobil cihazlar için */
            header {
                min-height: 160px;
                padding: 15px;
            }
            
            .company-title {
                font-size: 22px;
                margin-bottom: 5px;
            }
            
            h1 {
                font-size: 18px;
                margin-top: 10px;
                padding: 8px 15px;
            }
            
            .content {
                padding: 15px;
            }
            
            .input-section, .result-section {
                padding: 15px;
            }
        }
        
        .tax-info {
            background: #fff8e1;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            font-size: 14px;
            line-height: 1.6;
            color: #5d4037;
            font-weight: 500;
        }
        
        .influencer-section {
            background: #f0f7ff;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #d1e3ff;
        }
        
        .calculation-breakdown {
            background: linear-gradient(180deg, #f9f9f9 0%, #ffffff 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            font-size: 14px;
            border: 2px solid #eef2f7;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .breakdown-title {
            font-weight: 800;
            margin-bottom: 15px;
            color: #1e5631;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            line-height: 1.3;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px dotted #e0e0e0;
            font-weight: 500;
            flex-wrap: wrap;
        }
        
        .platform-service {
            background: #fff3e0;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
            border: 2px solid #ffcc80;
        }
        
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #ef5350;
            display: none;
            font-weight: 700;
            font-size: 15px;
            line-height: 1.4;
        }
        
        .success-message {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #4caf50;
            display: none;
            font-weight: 700;
            font-size: 15px;
            line-height: 1.4;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #eef2f7;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100px;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            border-color: #4caf50;
        }
        
        .stat-value {
            font-size: 22px;
            font-weight: 900;
            color: #1e5631;
            margin: 10px 0 5px;
            line-height: 1.2;
        }
        
        .stat-label {
            font-size: 13px;
            color: #718096;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.3;
        }
        
        .required-field::after {
            content: ' *';
            color: #ef4444;
        }
        
        input:invalid, select:invalid {
            border-color: #fca5a5;
        }
        
        .input-hint {
            font-size: 12px;
            color: #6b7280;
            margin-top: 5px;
            display: block;
            font-style: italic;
            line-height: 1.4;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #6b7280;
            font-size: 14px;
            border-top: 2px solid #e5e7eb;
            margin-top: 25px;
            background: #f9fafc;
            font-weight: 500;
            line-height: 1.6;
        }
        
        .cost-category {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 3px solid #e5e7eb;
        }
        
        .category-title {
            font-size: 18px;
            font-weight: 800;
            color: #1e5631;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            line-height: 1.3;
        }
        
        .category-title i {
            color: #4caf50;
            font-size: 20px;
        }
        
        .profit-ratios {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        /* Yeni eklenen: Input gruplarını daha sıkı hale getirme */
        .compact-section {
            background: #f8fafc;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #e2e8f0;
        }
        
        .compact-section .form-row {
            margin-bottom: 10px;
        }
        
        .compact-section .form-group {
            margin-bottom: 10px;
        }
        
        .section-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 15px;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-weight: 700;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .tab-btn.active {
            background: #4caf50;
            color: white;
            border-color: #388e3c;
        }
        
        .tab-btn:hover:not(.active) {
            background: #e5e7eb;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .info-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #d1e3ff;
        }
        
        .info-card h3 {
            color: #0c4a6e;
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-card p {
            color: #1e40af;
            font-size: 14px;
            line-height: 1.5;
        }
    </style>
    <!-- Font Awesome ikonları için -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <!-- Logo dosyası -->
                <img src="logo.png" alt="Formzen Logo" class="logo-image" onerror="this.style.display='none'; document.querySelector('.logo-placeholder').style.display='flex';">
                <div class="logo-placeholder" style="display: none;">
                    <i class="fas fa-leaf" style="font-size: 40px;"></i>
                </div>
                <div>
                    <div class="company-title">FORMZEN BİTKİSEL GIDA ÜRÜNLERİ</div>
                    <div class="company-subtitle">Doğadan Gelen Denge</div>
                </div>
            </div>
            <h1>E-Ticaret Kar/Zarar Hesaplama Programı</h1>
        </header>
        
        <div class="content">
            <div class="input-section">
                <div class="section-title"><i class="fas fa-edit"></i> Temel Bilgiler</div>
                
                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>
                
                <div class="info-card">
                    <h3><i class="fas fa-lightbulb"></i> Hızlı Başlangıç</h3>
                    <p>Ürün bilgilerinizi girin, tüm maliyetleri ekleyin ve kar/zarar durumunuzu anında görün.</p>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName" class="required-field">Ürün Adı</label>
                        <input type="text" id="productName" placeholder="Örn: Formzen Bromelain Şurubu" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="platform" class="required-field">Platform</label>
                        <select id="platform" required>
                            <option value="">Platform Seçin</option>
                            <option value="trendyol">Trendyol</option>
                            <option value="hepsiburada">Hepsiburada</option>
                            <option value="n11">N11</option>
                            <option value="amazon">Amazon</option>
                            <option value="digeryer">Diğer</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="quantity" class="required-field">Satılacak Toplam Ürün Adedi</label>
                        <input type="number" id="quantity" placeholder="Örn: 3" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="salePrice" class="required-field">Birim Satış Fiyatı (₺)</label>
                        <input type="number" id="salePrice" placeholder="Örn: 249.99" min="0" step="0.01" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productCost" class="required-field">Birim Ürün Maliyeti (₺)</label>
                        <input type="number" id="productCost" placeholder="Örn: 60.00" min="0" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="commission" class="required-field">Platform Komisyonu (%)</label>
                        <input type="number" id="commission" placeholder="Platforma göre girin" min="0" max="100" step="0.1" required>
                        <span class="input-hint">Trendyol: %16, Hepsiburada: %10, N11: %15, Amazon: %12</span>
                    </div>
                </div>
                
                <div class="section-tabs" id="sectionTabs">
                    <div class="tab-btn active" data-tab="costs"><i class="fas fa-calculator"></i> Maliyetler</div>
                    <div class="tab-btn" data-tab="campaign"><i class="fas fa-tag"></i> Kampanyalar</div>
                    <div class="tab-btn" data-tab="influencer"><i class="fas fa-users"></i> Influencer</div>
                </div>
                
                <div id="costsTab" class="tab-content active">
                    <div class="advanced-section">
                        <div class="category-title"><i class="fas fa-tags"></i> Üretim Maliyetleri</div>
                        <div class="form-row">
                            <div class="compact-form-group">
                                <label for="labelCost">Etiket Maliyeti (birim) (₺)</label>
                                <input type="number" id="labelCost" placeholder="Örn: 3.50" min="0" step="0.01">
                            </div>
                            
                            <div class="compact-form-group">
                                <label for="packagingCost">Paketleme Maliyeti (birim) (₺)</label>
                                <input type="number" id="packagingCost" placeholder="Örn: 10.00" min="0" step="0.01">
                            </div>
                        </div>
                        
                        <div class="category-title" style="margin-top: 20px;"><i class="fas fa-shipping-fast"></i> Lojistik Maliyetleri</div>
                        <div class="form-row">
                            <div class="compact-form-group">
                                <label for="shippingCost">Kargo Maliyeti (toplam) (₺)</label>
                                <input type="number" id="shippingCost" placeholder="Örn: 74.00" min="0" step="0.01">
                                <span class="label-info">Toplam sipariş için tek seferlik</span>
                            </div>
                            
                            <div class="compact-form-group">
                                <label for="adCost">Reklam Gideri (toplam) (₺)</label>
                                <input type="number" id="adCost" placeholder="Örn: 5.00" min="0" step="0.01">
                                <span class="label-info">Toplam sipariş için (influencer hariç)</span>
                            </div>
                        </div>
                        
                        <div class="platform-service">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="platformServiceFee">Platform Hizmet Bedeli (₺)</label>
                                    <input type="number" id="platformServiceFee" placeholder="Örn: 10.00" min="0" step="0.01">
                                    <span class="label-info">Aylık/tek seferlik platform hizmet bedeli (adetten bağımsız)</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="category-title" style="margin-top: 20px;"><i class="fas fa-file-invoice-dollar"></i> Vergi Bilgileri</div>
                        <div class="form-row">
                            <div class="compact-form-group">
                                <label for="kdvRate">KDV Oranı (%)</label>
                                <select id="kdvRate">
                                    <option value="1" selected>%1 (Bitkisel Gıda Ürünleri)</option>
                                    <option value="8">%8 (Temel İhtiyaç)</option>
                                    <option value="18">%18 (Genel Oran)</option>
                                    <option value="20">%20 (Lüks Ürünler)</option>
                                </select>
                            </div>
                            
                            <div class="compact-form-group">
                                <label for="stopajRate">Stopaj Oranı (%)</label>
                                <input type="number" id="stopajRate" placeholder="Örn: 1" min="0" max="100" step="0.1">
                                <span class="label-info">KDV'siz satış fiyatı üzerinden</span>
                            </div>
                        </div>
                        
                        <div class="tax-info">
                            <strong><i class="fas fa-info-circle"></i> Vergi Bilgisi:</strong> Bitkisel gıda ürünleri için %1 KDV uygulanır. Stopaj, KDV'siz satış fiyatı üzerinden hesaplanır. Platform komisyonu KDV dahil fiyat üzerinden alınır.
                        </div>
                    </div>
                </div>
                
                <div id="campaignTab" class="tab-content">
                    <div class="campaign-section">
                        <div class="checkbox-group">
                            <input type="checkbox" id="enableCampaign">
                            <label for="enableCampaign">Kampanyalı Satış Aktif (3 al 2 öde gibi)</label>
                        </div>
                        
                        <div id="campaignInputs" class="campaign-inputs">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="campaignBuy">Kaç Ürün Alınıyor? (Alınan)</label>
                                    <input type="number" id="campaignBuy" placeholder="Örn: 3" min="1">
                                    <div class="campaign-example">Müşteri kampanyada kaç ürün alıyor?</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="campaignPay">Kaç Ürün Ödeniyor? (Ödenen)</label>
                                    <input type="number" id="campaignPay" placeholder="Örn: 2" min="1">
                                    <div class="campaign-example">Alınan ürünlerden kaç tanesi için ödeme yapılıyor?</div>
                                </div>
                            </div>
                            
                            <div class="campaign-info" id="campaignCalculation">
                                Kampanya Detayı: <span id="campaignDetails"></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="influencerTab" class="tab-content">
                    <div class="influencer-section">
                        <div class="checkbox-group">
                            <input type="checkbox" id="enableInfluencer">
                            <label for="enableInfluencer">Influencer Komisyonu Aktif</label>
                        </div>
                        
                        <div id="influencerInputs" class="campaign-inputs">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="influencerCommission">Influencer Komisyon Oranı (%)</label>
                                    <input type="number" id="influencerCommission" placeholder="Örn: 15" min="0" max="100" step="0.1">
                                    <div class="campaign-example">Satış fiyatı üzerinden yüzde olarak komisyon (tüm satışlar için)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="calculate-btn" id="calculateBtn">
                        <i class="fas fa-calculator"></i> HESAPLA
                    </button>
                    <button class="reset-btn" id="resetBtn">
                        <i class="fas fa-redo"></i> TEMİZLE
                    </button>
                </div>
            </div>
            
            <div class="result-section">
                <div class="section-title"><i class="fas fa-chart-line"></i> Kar/Zarar Analizi</div>
                
                <div id="resultDetails" class="cost-summary">
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 40px 20px; text-align: center;">
                        <i class="fas fa-calculator" style="font-size: 64px; color: #cbd5e0; margin-bottom: 20px;"></i>
                        <h3 style="color: #4a5568; margin-bottom: 15px; font-size: 22px;">Hızlı Kar/Zarar Analizi</h3>
                        <p style="color: #718096; font-size: 16px; line-height: 1.6; max-width: 400px;">
                            Sol tarafta ürün bilgilerinizi doldurun ve "HESAPLA" butonuna tıklayın. 
                            Anında kar/zarar durumunuzu ve detaylı analizi görüntüleyin.
                        </p>
                        <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                            <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                                <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">1</div>
                                <div style="font-size: 14px; color: #4b5563;">Temel Bilgileri Gir</div>
                            </div>
                            <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                                <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">2</div>
                                <div style="font-size: 14px; color: #4b5563;">Maliyetleri Ekle</div>
                            </div>
                            <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                                <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">3</div>
                                <div style="font-size: 14px; color: #4b5563;">Sonucu Gör</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="calculation-breakdown" id="breakdownSection" style="display:none;">
                    <div class="breakdown-title">Kampanya Hesaplama Detayları</div>
                    <div id="breakdownDetails"></div>
                </div>
                
                <div id="profitResult" class="total-profit" style="display:none;">
                    <div class="profit-header">NET KAR / ZARAR (TOPLAM)</div>
                    <div id="profitAmount" class="profit-neutral">₺0.00</div>
                    
                    <div class="profit-ratios">
                        <div class="profit-margin">Kar Marjı: <span id="profitMargin">%0.00</span></div>
                        <div class="profit-ratio">Kar Oranı: <span id="profitRatio">%0.00</span></div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Birim Başına Ort. Kar</div>
                            <div class="stat-value" id="unitProfit">₺0.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Toplam Gelir (KDV Dahil)</div>
                            <div class="stat-value" id="totalWithKdv">₺0.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Etkili Birim Satış Fiyatı</div>
                            <div class="stat-value" id="effectivePrice">₺0.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Toplam Maliyet</div>
                            <div class="stat-value" id="totalCostDisplay">₺0.00</div>
                        </div>
                    </div>
                </div>
                
                <div class="history-section">
                    <div class="history-title">
                        <span><i class="fas fa-history"></i> Hesaplama Geçmişi</span>
                        <button class="clear-history" id="clearHistory">
                            <i class="fas fa-trash-alt"></i> Temizle
                        </button>
                    </div>
                    <div id="historyList">
                        <p style="text-align: center; color: #999; padding: 20px; font-style: italic;">
                            Henüz hesaplama yapılmadı.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p><strong>Formzen Bitkisel Gıda Ürünleri</strong> &copy; 2025 - Tüm hakları saklıdır.</p>
            <p style="font-size: 14px; margin-top: 10px; color: #4b5563;">Bu araç tahmini kar/zarar hesaplamaları için hazırlanmıştır. Kesin değerler için muhasebe uzmanınıza danışınız.</p>
        </div>
    </div>

    <script>
        // Platforma göre varsayılan komisyon oranları (referans için)
        const platformCommissions = {
            trendyol: 18,
            hepsiburada: 20,
            n11: 15,
            amazon: 25,
            digeryer: 10
        };

        // DOM elementlerini seç
        const platformSelect = document.getElementById('platform');
        const commissionInput = document.getElementById('commission');
        const calculateBtn = document.getElementById('calculateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const clearHistoryBtn = document.getElementById('clearHistory');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        
        // Kampanya elementleri
        const enableCampaignCheckbox = document.getElementById('enableCampaign');
        const campaignInputs = document.getElementById('campaignInputs');
        const campaignBuyInput = document.getElementById('campaignBuy');
        const campaignPayInput = document.getElementById('campaignPay');
        const campaignDetails = document.getElementById('campaignDetails');
        const campaignCalculation = document.getElementById('campaignCalculation');
        
        // Influencer elementleri
        const enableInfluencerCheckbox = document.getElementById('enableInfluencer');
        const influencerInputs = document.getElementById('influencerInputs');
        const influencerCommissionInput = document.getElementById('influencerCommission');
        
        // Tab yapısı
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        // Platform seçildiğinde komisyon oranını öner (doldurmaz, sadece placeholder'ı değiştirir)
        platformSelect.addEventListener('change', function() {
            const platform = this.value;
            
            if (platform in platformCommissions) {
                commissionInput.placeholder = `Önerilen: %${platformCommissions[platform]} (Platforma göre girin)`;
            } else {
                commissionInput.placeholder = "Platforma göre girin";
            }
        });

        // Tab yapısını yönet
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                
                // Tüm tab butonlarını ve içeriklerini devre dışı bırak
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Aktif tab'ı etkinleştir
                btn.classList.add('active');
                document.getElementById(`${tabId}Tab`).classList.add('active');
            });
        });

        // Kampanya checkbox'ını dinle
        enableCampaignCheckbox.addEventListener('change', function() {
            if (this.checked) {
                campaignInputs.style.display = 'block';
                campaignCalculation.style.display = 'block';
                updateCampaignDetails();
            } else {
                campaignInputs.style.display = 'none';
                campaignCalculation.style.display = 'none';
            }
        });

        // Influencer checkbox'ını dinle
        enableInfluencerCheckbox.addEventListener('change', function() {
            if (this.checked) {
                influencerInputs.style.display = 'block';
            } else {
                influencerInputs.style.display = 'none';
            }
        });

        // Kampanya detaylarını güncelle
        function updateCampaignDetails() {
            const buy = parseInt(campaignBuyInput.value) || 3;
            const pay = parseInt(campaignPayInput.value) || 2;
            
            if (buy > 0 && pay > 0 && pay <= buy) {
                const discount = ((buy - pay) / buy * 100).toFixed(1);
                campaignDetails.textContent = `${buy} al ${pay} öde (≈%${discount} indirim) - Ürün maliyeti ${buy} adet, gelir ${pay} adet üzerinden hesaplanır`;
            }
        }

        // Kampanya inputlarını dinle
        campaignBuyInput.addEventListener('input', updateCampaignDetails);
        campaignPayInput.addEventListener('input', updateCampaignDetails);

        // Hesapla butonu işlevi
        calculateBtn.addEventListener('click', calculateProfit);

        // Enter tuşu ile hesaplama
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                calculateProfit();
            }
        });

        // Temizle butonu işlevi
        resetBtn.addEventListener('click', resetForm);

        // Geçmişi temizle butonu
        clearHistoryBtn.addEventListener('click', clearHistory);

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
            
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
            
            errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function showSuccess(message) {
            successMessage.textContent = message;
            successMessage.style.display = 'block';
            errorMessage.style.display = 'none';
            
            setTimeout(() => {
                successMessage.style.display = 'none';
            }, 3000);
        }

        function calculateProfit() {
            console.log("Hesaplama fonksiyonu çağrıldı!");
            
            // Değerleri al
            const productName = document.getElementById('productName').value;
            const platform = platformSelect.value;
            const quantity = parseFloat(document.getElementById('quantity').value) || 0;
            const salePrice = parseFloat(document.getElementById('salePrice').value) || 0;
            const productCost = parseFloat(document.getElementById('productCost').value) || 0;
            const commission = parseFloat(document.getElementById('commission').value) || 0;
            
            // Kampanya değerleri
            const hasCampaign = enableCampaignCheckbox.checked;
            const campaignBuy = hasCampaign ? parseFloat(campaignBuyInput.value) || 3 : 1;
            const campaignPay = hasCampaign ? parseFloat(campaignPayInput.value) || 2 : 1;
            
            // Influencer değerleri
            const hasInfluencer = enableInfluencerCheckbox.checked;
            const influencerCommission = hasInfluencer ? parseFloat(influencerCommissionInput.value) || 10 : 0;
            
            // Diğer maliyetler
            const labelCost = parseFloat(document.getElementById('labelCost').value) || 0;
            const packagingCost = parseFloat(document.getElementById('packagingCost').value) || 0;
            const shippingCost = parseFloat(document.getElementById('shippingCost').value) || 0;
            const adCost = parseFloat(document.getElementById('adCost').value) || 0;
            const platformServiceFee = parseFloat(document.getElementById('platformServiceFee').value) || 0;
            const kdvRate = parseFloat(document.getElementById('kdvRate').value) || 1;
            const stopajRate = parseFloat(document.getElementById('stopajRate').value) || 10;
            
            console.log("Değerler:", {
                productName, quantity, salePrice, productCost, commission,
                hasCampaign, campaignBuy, campaignPay,
                hasInfluencer, influencerCommission,
                labelCost, packagingCost, shippingCost, adCost, platformServiceFee,
                kdvRate, stopajRate
            });
            
            // Hata kontrolleri
            if (!productName || productName.trim() === '') {
                showError('Lütfen ürün adını girin.');
                return;
            }
            
            if (platform === '') {
                showError('Lütfen bir platform seçin.');
                return;
            }
            
            if (quantity <= 0) {
                showError('Lütfen geçerli bir ürün adedi girin.');
                return;
            }
            
            if (salePrice <= 0) {
                showError('Lütfen geçerli bir satış fiyatı girin.');
                return;
            }
            
            if (productCost < 0) {
                showError('Lütfen geçerli bir ürün maliyeti girin.');
                return;
            }
            
            if (commission <= 0 || commission > 100) {
                showError('Lütfen geçerli bir platform komisyon oranı girin (0-100 arası).');
                return;
            }
            
            if (hasCampaign) {
                if (campaignBuy <= 0 || campaignPay <= 0) {
                    showError('Kampanya için geçerli değerler girin.');
                    return;
                }
                if (campaignPay > campaignBuy) {
                    showError('Ödenen ürün sayısı, alınan üründen fazla olamaz.');
                    return;
                }
            }
            
            // HESAPLAMA
            
            // 1. Kampanya hesaplaması
            let effectiveQuantity = quantity;
            let campaignDiscount = 0;
            let campaignMultiplier = 1;
            let campaignDescription = "Kampanya yok";
            
            if (hasCampaign) {
                // Kampanya varsa hesaplamaları ayarla
                campaignMultiplier = campaignPay / campaignBuy;
                effectiveQuantity = quantity * campaignMultiplier;
                campaignDiscount = 100 * (1 - campaignMultiplier);
                campaignDescription = `${campaignBuy} al ${campaignPay} öde (%${campaignDiscount.toFixed(1)} indirim)`;
            }
            
            // 2. Toplam gelir
            const totalRevenue = quantity * salePrice;
            const effectiveRevenue = effectiveQuantity * salePrice;
            
            // 3. Ürün maliyetleri
            const totalProductCost = quantity * productCost;
            
            // 4. Platform komisyonu
            const totalCommission = effectiveRevenue * (commission / 100);
            
            // 5. Influencer komisyonu
            const totalInfluencerCommission = hasInfluencer ? effectiveRevenue * (influencerCommission / 100) : 0;
            
            // 6. Diğer maliyetler
            const totalLabelCost = quantity * labelCost;
            const totalPackagingCost = quantity * packagingCost;
            const totalShippingCost = shippingCost;
            const totalAdCost = adCost;
            const totalPlatformServiceFee = platformServiceFee;
            
            // 7. Vergi hesaplamaları
            const kdvAmount = effectiveRevenue * (kdvRate / 100);
            const stopajAmount = (effectiveRevenue - kdvAmount) * (stopajRate / 100);
            
            // 8. Toplam maliyet
            const totalCost = totalProductCost + totalCommission + totalInfluencerCommission +
                             totalLabelCost + totalPackagingCost + totalShippingCost + 
                             totalAdCost + totalPlatformServiceFee + kdvAmount + stopajAmount;
            
            // 9. Kar/Zarar hesaplama
            const totalProfit = effectiveRevenue - totalCost;
            const profitMargin = effectiveRevenue > 0 ? (totalProfit / effectiveRevenue) * 100 : 0;
            
            // 10. Kar oranı (kar / (alış maliyeti + etiket + ambalaj))
            const productionCost = totalProductCost + totalLabelCost + totalPackagingCost;
            const profitRatio = productionCost > 0 ? (totalProfit / productionCost) * 100 : 0;
            
            const unitProfit = quantity > 0 ? totalProfit / quantity : 0;
            const effectiveUnitPrice = effectiveQuantity > 0 ? effectiveRevenue / quantity : 0;
            
            console.log("Sonuçlar:", {
                totalRevenue, effectiveRevenue, totalProductCost, totalCommission,
                totalInfluencerCommission, totalCost, totalProfit, profitMargin, profitRatio
            });
            
            // Sonuçları göster
            displayResults(
                productName, platform, quantity, salePrice, productCost, commission,
                hasCampaign, campaignDescription, hasInfluencer, influencerCommission,
                totalRevenue, effectiveRevenue, totalProductCost, totalCommission,
                totalInfluencerCommission, totalLabelCost, totalPackagingCost,
                totalShippingCost, totalAdCost, totalPlatformServiceFee,
                kdvAmount, stopajRate, stopajAmount, totalCost,
                totalProfit, profitMargin, profitRatio, unitProfit, effectiveUnitPrice
            );
            
            showSuccess('Hesaplama başarıyla tamamlandı!');
        }

        function displayResults(
            productName, platform, quantity, salePrice, productCost, commission,
            hasCampaign, campaignDescription, hasInfluencer, influencerCommission,
            totalRevenue, effectiveRevenue, totalProductCost, totalCommission,
            totalInfluencerCommission, totalLabelCost, totalPackagingCost,
            totalShippingCost, totalAdCost, totalPlatformServiceFee,
            kdvAmount, stopajRate, stopajAmount, totalCost,
            totalProfit, profitMargin, profitRatio, unitProfit, effectiveUnitPrice
        ) {
            
            const resultDetails = document.getElementById('resultDetails');
            const profitResult = document.getElementById('profitResult');
            const profitAmount = document.getElementById('profitAmount');
            const profitMarginSpan = document.getElementById('profitMargin');
            const profitRatioSpan = document.getElementById('profitRatio');
            const unitProfitSpan = document.getElementById('unitProfit');
            const totalWithKdvSpan = document.getElementById('totalWithKdv');
            const effectivePriceSpan = document.getElementById('effectivePrice');
            const totalCostDisplay = document.getElementById('totalCostDisplay');
            const breakdownSection = document.getElementById('breakdownSection');
            const breakdownDetails = document.getElementById('breakdownDetails');
            
            // Detaylı sonuç tablosu
            let resultHTML = `
                <div style="margin-bottom: 20px; font-weight: 900; color: #1e5631; font-size: 20px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                    <i class="fas fa-box"></i> ${productName}
                </div>
                <div style="margin-bottom: 20px; color: #4a5568; background: linear-gradient(90deg, #f8fafc, #ffffff); padding: 15px; border-radius: 10px; border: 2px solid #e2e8f0;">
                    <strong style="color: #1e5631; font-size: 16px;">${platformSelect.options[platformSelect.selectedIndex].text}</strong> 
                    <span style="color: #718096;">- ${quantity} adet satış</span>
                    ${hasCampaign ? `<br><strong style="color: #4caf50; margin-top: 8px; display: inline-block;"><i class="fas fa-tag"></i> ${campaignDescription}</strong>` : ''}
                </div>
                
                <div class="cost-category">
                    <div class="category-title"><i class="fas fa-money-bill-wave"></i> GELİR BİLGİLERİ</div>
                    <div class="cost-item" style="background: #f0f9ff; padding: 12px; border-radius: 8px;">
                        <span class="cost-title" style="font-size: 16px; color: #0c4a6e;">Toplam Gelir ${hasCampaign ? '(kampanyalı)' : ''}</span>
                        <span class="cost-value" style="font-size: 20px; color: #0c4a6e; font-weight: 900;">₺${effectiveRevenue.toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-sub-item">
                        <span class="sub-item-title">Birim Satış Fiyatı</span>
                        <span style="font-weight: 700;">₺${salePrice.toFixed(2)}</span>
                    </div>
                    
                    ${hasCampaign ? `
                    <div class="cost-sub-item">
                        <span class="sub-item-title">Etkili Birim Fiyat (kampanya sonrası)</span>
                        <span style="font-weight: 700; color: #4caf50;">₺${effectiveUnitPrice.toFixed(2)}</span>
                    </div>
                    ` : ''}
                </div>
                
                <div class="cost-category">
                    <div class="category-title"><i class="fas fa-calculator"></i> MALİYET DETAYLARI</div>
                    
                    <div class="cost-item">
                        <span class="cost-title">Ürün Maliyeti (${quantity} adet)</span>
                        <span class="cost-value">₺${totalProductCost.toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-item">
                        <span class="cost-title">Platform Komisyonu (%${commission})</span>
                        <span class="cost-value">₺${totalCommission.toFixed(2)}</span>
                    </div>
                    
                    ${hasInfluencer ? `
                    <div class="cost-item">
                        <span class="cost-title">Influencer Komisyonu (%${influencerCommission})</span>
                        <span class="cost-value">₺${totalInfluencerCommission.toFixed(2)}</span>
                    </div>
                    ` : ''}
                    
                    <div class="cost-item">
                        <span class="cost-title">Etiket & Paketleme Maliyeti</span>
                        <span class="cost-value">₺${(totalLabelCost + totalPackagingCost).toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-sub-item">
                        <span class="sub-item-title">Etiket Maliyeti (${quantity} adet)</span>
                        <span>₺${totalLabelCost.toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-sub-item">
                        <span class="sub-item-title">Paketleme Maliyeti (${quantity} adet)</span>
                        <span>₺${totalPackagingCost.toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-item">
                        <span class="cost-title">Kargo Maliyeti</span>
                        <span class="cost-value">₺${totalShippingCost.toFixed(2)}</span>
                    </div>
                    
                    ${totalAdCost > 0 ? `
                    <div class="cost-item">
                        <span class="cost-title">Reklam Gideri</span>
                        <span class="cost-value">₺${totalAdCost.toFixed(2)}</span>
                    </div>
                    ` : ''}
                    
                    ${totalPlatformServiceFee > 0 ? `
                    <div class="cost-item">
                        <span class="cost-title">Platform Hizmet Bedeli</span>
                        <span class="cost-value">₺${totalPlatformServiceFee.toFixed(2)}</span>
                    </div>
                    ` : ''}
                    
                    <div class="cost-item">
                        <span class="cost-title">Vergiler</span>
                        <span class="cost-value">₺${(kdvAmount + stopajAmount).toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-sub-item">
                        <span class="sub-item-title">KDV (%1)</span>
                        <span>₺${kdvAmount.toFixed(2)}</span>
                    </div>
                    
                    <div class="cost-sub-item">
                        <span class="sub-item-title">Stopaj (%${stopajRate})</span>
                        <span>₺${stopajAmount.toFixed(2)}</span>
                    </div>
                </div>
                
                <div class="cost-item" style="border-top: 3px solid #dc2626; padding-top: 15px; font-size: 18px; background: linear-gradient(90deg, #fef2f2, #ffffff); margin-top: 15px; border-radius: 8px; padding: 15px;">
                    <span class="cost-title" style="font-size: 20px; color: #dc2626; font-weight: 900;">TOPLAM MALİYET</span>
                    <span class="cost-value" style="font-size: 24px; color: #dc2626; font-weight: 900;">₺${totalCost.toFixed(2)}</span>
                </div>
            `;
            
            resultDetails.innerHTML = resultHTML;
            
            // Kampanya detaylarını göster
            if (hasCampaign) {
                breakdownSection.style.display = 'block';
                breakdownDetails.innerHTML = `
                    <div class="breakdown-item">
                        <span>Normal satış geliri (${quantity} adet × ₺${salePrice.toFixed(2)})</span>
                        <span>₺${totalRevenue.toFixed(2)}</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Kampanya indirimi (${campaignDescription})</span>
                        <span style="color: #ef4444; font-weight: 700;">-₺${(totalRevenue - effectiveRevenue).toFixed(2)}</span>
                    </div>
                    <div class="breakdown-item" style="font-weight: 800; border-top: 2px solid #4caf50; padding-top: 12px; font-size: 15px;">
                        <span style="color: #1e5631;">Kampanya sonrası net gelir</span>
                        <span style="color: #1e5631; font-size: 17px;">₺${effectiveRevenue.toFixed(2)}</span>
                    </div>
                `;
            } else {
                breakdownSection.style.display = 'none';
            }
            
            // Kar/zarar sonucu
            profitResult.style.display = 'block';
            totalWithKdvSpan.textContent = `₺${effectiveRevenue.toFixed(2)}`;
            unitProfitSpan.textContent = `₺${unitProfit.toFixed(2)}`;
            effectivePriceSpan.textContent = `₺${effectiveUnitPrice.toFixed(2)}`;
            totalCostDisplay.textContent = `₺${totalCost.toFixed(2)}`;
            
            if (totalProfit > 0) {
                profitAmount.textContent = `₺${totalProfit.toFixed(2)} KAR`;
                profitAmount.className = 'profit-positive';
                profitResult.style.background = 'linear-gradient(135deg, #f0fdf4 0%, #d1fae5 100%)';
                profitResult.style.borderColor = '#10b981';
                profitResult.style.boxShadow = '0 10px 30px rgba(16, 185, 129, 0.2)';
            } else if (totalProfit < 0) {
                profitAmount.textContent = `₺${Math.abs(totalProfit).toFixed(2)} ZARAR`;
                profitAmount.className = 'profit-negative';
                profitResult.style.background = 'linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)';
                profitResult.style.borderColor = '#ef4444';
                profitResult.style.boxShadow = '0 10px 30px rgba(239, 68, 68, 0.2)';
            } else {
                profitAmount.textContent = '₺0.00';
                profitAmount.className = 'profit-neutral';
                profitResult.style.background = 'linear-gradient(135deg, #f9fafc 0%, #f3f4f6 100%)';
                profitResult.style.borderColor = '#9ca3af';
                profitResult.style.boxShadow = '0 10px 30px rgba(0, 0, 0, 0.1)';
            }
            
            profitMarginSpan.textContent = `${profitMargin.toFixed(2)}%`;
            profitRatioSpan.textContent = `${profitRatio.toFixed(2)}%`;
            
            // Kar oranı renklendirme
            if (profitRatio > 50) {
                profitRatioSpan.style.color = '#10b981';
            } else if (profitRatio > 20) {
                profitRatioSpan.style.color = '#3b82f6';
            } else if (profitRatio > 0) {
                profitRatioSpan.style.color = '#f59e0b';
            } else {
                profitRatioSpan.style.color = '#ef4444';
            }
            
            // Kar marjı renklendirme
            if (profitMargin > 30) {
                profitMarginSpan.style.color = '#10b981';
            } else if (profitMargin > 15) {
                profitMarginSpan.style.color = '#3b82f6';
            } else if (profitMargin > 0) {
                profitMarginSpan.style.color = '#f59e0b';
            } else {
                profitMarginSpan.style.color = '#ef4444';
            }
            
            // Sonuca scroll et
            profitResult.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Geçmişe ekle
            addToHistory(productName, platformSelect.options[platformSelect.selectedIndex].text, 
                        quantity, effectiveRevenue, totalProfit, profitMargin, hasCampaign);
        }

        function addToHistory(productName, platform, quantity, totalRevenue, profit, profitMargin, hasCampaign) {
            const historyList = document.getElementById('historyList');
            
            // İlk mesajı kaldır
            if (historyList.querySelector('p')) {
                historyList.innerHTML = '';
            }
            
            // Yeni geçmiş öğesi oluştur
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            
            const profitClass = profit > 0 ? 'profit-positive-sm' : (profit < 0 ? 'profit-negative-sm' : '');
            const profitText = profit > 0 ? `+₺${profit.toFixed(2)}` : (profit < 0 ? `-₺${Math.abs(profit).toFixed(2)}` : '₺0.00');
            
            let campaignBadge = '';
            if (hasCampaign) {
                campaignBadge = '<span style="background: linear-gradient(90deg, #4caf50, #2e7d32); color: white; padding: 3px 10px; border-radius: 20px; font-size: 11px; margin-left: 6px; font-weight: 800;"><i class="fas fa-tag"></i> KAMPANYA</span>';
            }
            
            historyItem.innerHTML = `
                <div class="history-product">${productName} ${campaignBadge}</div>
                <div class="history-platform"><i class="fas fa-store"></i> ${platform} - <i class="fas fa-boxes"></i> ${quantity} adet - <i class="fas fa-money-bill-wave"></i> ₺${totalRevenue.toFixed(2)}</div>
                <div class="history-profit ${profitClass}">${profitText} <span style="font-size: 14px;">(%${profitMargin.toFixed(2)})</span></div>
                <div style="clear:both;"></div>
            `;
            
            // En üste ekle
            historyList.prepend(historyItem);
            
            // En fazla 15 öğe tut
            const items = historyList.querySelectorAll('.history-item');
            if (items.length > 15) {
                items[items.length - 1].remove();
            }
            
            // Geçmişi localStorage'a kaydet
            saveHistoryToLocal();
        }

        function resetForm() {
            // Tüm inputları temizle
            document.getElementById('productName').value = '';
            document.getElementById('platform').value = '';
            document.getElementById('quantity').value = '';
            document.getElementById('salePrice').value = '';
            document.getElementById('productCost').value = '';
            document.getElementById('commission').value = '';
            document.getElementById('commission').placeholder = "Platforma göre girin";
            
            // Kampanya
            enableCampaignCheckbox.checked = false;
            campaignInputs.style.display = 'none';
            campaignCalculation.style.display = 'none';
            campaignBuyInput.value = '';
            campaignPayInput.value = '';
            
            // Influencer
            enableInfluencerCheckbox.checked = false;
            influencerInputs.style.display = 'none';
            influencerCommissionInput.value = '';
            
            // Diğer maliyetler (boş)
            document.getElementById('labelCost').value = '';
            document.getElementById('packagingCost').value = '';
            document.getElementById('shippingCost').value = '';
            document.getElementById('adCost').value = '';
            document.getElementById('platformServiceFee').value = '';
            document.getElementById('kdvRate').value = '1';
            document.getElementById('stopajRate').value = '';
            
            // Tab'ları sıfırla
            tabBtns.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            document.querySelector('[data-tab="costs"]').classList.add('active');
            document.getElementById('costsTab').classList.add('active');
            
            // Sonuçları sıfırla
            document.getElementById('resultDetails').innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 40px 20px; text-align: center;">
                    <i class="fas fa-calculator" style="font-size: 64px; color: #cbd5e0; margin-bottom: 20px;"></i>
                    <h3 style="color: #4a5568; margin-bottom: 15px; font-size: 22px;">Hızlı Kar/Zarar Analizi</h3>
                    <p style="color: #718096; font-size: 16px; line-height: 1.6; max-width: 400px;">
                        Sol tarafta ürün bilgilerinizi doldurun ve "HESAPLA" butonuna tıklayın. 
                        Anında kar/zarar durumunuzu ve detaylı analizi görüntüleyin.
                    </p>
                    <div style="margin-top: 30px; display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                        <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">1</div>
                            <div style="font-size: 14px; color: #4b5563;">Temel Bilgileri Gir</div>
                        </div>
                        <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">2</div>
                            <div style="font-size: 14px; color: #4b5563;">Maliyetleri Ekle</div>
                        </div>
                        <div style="background: #f0f9ff; padding: 15px; border-radius: 10px; border: 2px solid #dbeafe; min-width: 150px;">
                            <div style="font-size: 24px; font-weight: 900; color: #0c4a6e;">3</div>
                            <div style="font-size: 14px; color: #4b5563;">Sonucu Gör</div>
                        </div>
                    </div>
                </div>`;
            document.getElementById('profitResult').style.display = 'none';
            document.getElementById('breakdownSection').style.display = 'none';
            
            showSuccess('Form başarıyla temizlendi!');
        }

        function clearHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '<p style="text-align: center; color: #999; padding: 20px; font-style: italic;">Henüz hesaplama yapılmadı.</p>';
            
            // LocalStorage'dan da temizle
            localStorage.removeItem('ecommerceProfitHistory');
            
            showSuccess('Geçmiş başarıyla temizlendi!');
        }

        function saveHistoryToLocal() {
            const historyList = document.getElementById('historyList');
            const items = historyList.querySelectorAll('.history-item');
            const historyData = [];
            
            items.forEach(item => {
                const product = item.querySelector('.history-product').textContent;
                const platformText = item.querySelector('.history-platform').textContent;
                const profitText = item.querySelector('.history-profit').textContent;
                
                historyData.push({
                    product: product,
                    platform: platformText,
                    profit: profitText
                });
            });
            
            localStorage.setItem('ecommerceProfitHistory', JSON.stringify(historyData));
        }

        function loadHistoryFromLocal() {
            const historyData = localStorage.getItem('ecommerceProfitHistory');
            const historyList = document.getElementById('historyList');
            
            if (historyData) {
                const history = JSON.parse(historyData);
                historyList.innerHTML = '';
                
                history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    // Profit class'ını belirle
                    let profitClass = '';
                    if (item.profit.includes('+')) profitClass = 'profit-positive-sm';
                    else if (item.profit.includes('-')) profitClass = 'profit-negative-sm';
                    
                    historyItem.innerHTML = `
                        <div class="history-product">${item.product}</div>
                        <div class="history-platform">${item.platform}</div>
                        <div class="history-profit ${profitClass}">${item.profit}</div>
                        <div style="clear:both;"></div>
                    `;
                    
                    historyList.appendChild(historyItem);
                });
            }
        }

        // Sayfa yüklendiğinde
        window.onload = function() {
            console.log("Sayfa yüklendi!");
            
            // Logo kontrolü
            const logoImg = document.querySelector('.logo-image');
            const logoPlaceholder = document.querySelector('.logo-placeholder');
            
            // Logo yüklenmezse placeholder'ı göster
            logoImg.onerror = function() {
                logoImg.style.display = 'none';
                logoPlaceholder.style.display = 'flex';
            };
            
            // Kampanya detaylarını güncelle
            updateCampaignDetails();
            
            // Geçmişi yükle
            loadHistoryFromLocal();
            
            // Mobil uyumluluk için ekstra ayarlar
            if (window.innerWidth <= 768) {
                console.log("Mobil görünüm aktif");
                // Mobil için özel ayarlar
                document.querySelectorAll('input, select').forEach(el => {
                    el.style.fontSize = '16px'; // iOS için zoom önleme
                });
            }
            
            // Yatay modda mobil cihazlar için ek ayarlar
            function handleOrientationChange() {
                if (window.innerHeight <= 500 && window.innerWidth > window.innerHeight) {
                    // Yatay modda ve küçük yükseklik
                    document.querySelector('header').style.minHeight = '140px';
                    document.querySelector('h1').style.fontSize = '16px';
                }
            }
            
            // Ekran yönü değişikliklerini dinle
            window.addEventListener('resize', handleOrientationChange);
            handleOrientationChange();
        };
    </script>
</body>
</html>